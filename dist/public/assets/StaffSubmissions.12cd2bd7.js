import{_ as s,F as a}from"./DataTable.3bd407d9.js";import{d as i,o as t,c as o,a as e,n,A as d,h as l,f as m,b as u}from"./vendor.9fbad299.js";var b=i({name:"StaffSubmissionUpdate",props:{submissionProp:{type:Object,default:()=>null}},emits:["update:submission"],data:()=>({anonymisedAs:"",isSaving:!1}),watch:{submissionProp(s){this.anonymisedAs=(null==s?void 0:s.anonymisedAs)||""}},methods:{async update(){const{data:s}=await this.$http.put(`/api/staff/submissions/${this.submissionProp.id}`,{anonymisedAs:this.anonymisedAs});this.$emit("update:submission",s)}}});const r={class:"modal fade",tabindex:"-1"},c={class:"modal-dialog modal-xl"},p={class:"modal-content"},f=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"}," Update submission "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={key:0,class:"modal-body"},h={class:"container"},v={class:"row"},S={class:"col-sm"},g={class:"modal-footer"},A=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);b.render=function(s,a,i,m,u,b){return t(),o("div",r,[e("div",c,[e("div",p,[f,s.submissionProp?(t(),o("div",y,[e("div",h,[e("div",v,[e("div",S,[n(e("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>s.anonymisedAs=a),type:"text",class:"form-control",placeholder:"Anonymised as..."},null,512),[[d,s.anonymisedAs]])])])])])):l("",!0),e("div",g,[A,e("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...a)=>s.update&&s.update(...a))}," Save changes ")])])])])};var k=i({name:"StaffSubmissions",components:{DataTable:s,StaffSubmissionUpdate:b},data:()=>({fields:[{key:"team",label:"Team",formatter:s=>s.name},{key:"updatedAt",label:"Submission Date",formatter:a.DateTimeString},{key:"originalPath",label:"Download"},{key:"anonymisedAs",label:"Anonymised As"}],selectedSubmission:null,submissions:[]}),async created(){const{data:s}=await this.$http.get(`/api/staff/rounds/${this.$route.params.id}/submissions`);this.submissions=s},methods:{update(s){const a=this.submissions.findIndex((a=>a.id===s.id));-1!==a&&(this.submissions[a]=s)}}});const w={class:"container"},U={class:"card"},$=e("div",{class:"card-title"}," Submissions ",-1),D=e("div",{class:"card-subtitle"}," Listing of submissions by round, you NEED to set an anonymised name, otherwise it'll not show up for the judges ",-1),P={class:"card-body"},x={key:1};k.render=function(s,a,i,n,d,b){const r=m("data-table"),c=m("staff-submission-update");return t(),o("div",w,[e("div",U,[$,D,e("div",P,[s.submissions.length?(t(),o(r,{key:0,fields:s.fields,items:s.submissions},{"cell-originalPath":u((s=>[s.value?(t(),o("a",{key:0,href:`/api/staff/submissions/${s.item.id}/download`}," download ",8,["href"])):l("",!0)])),actions:u((({item:a})=>[e("button",{class:"btn btn-sm btn-primary","data-bs-toggle":"modal","data-bs-target":"#submissionUpdate",onClick:i=>s.selectedSubmission=a}," Edit ",8,["onClick"])])),_:1},8,["fields","items"])):(t(),o("span",x," No submissions "))])]),e(c,{id:"submissionUpdate","submission-prop":s.selectedSubmission,"onUpdate:submission":a[1]||(a[1]=a=>s.update(a))},null,8,["submission-prop"])])};export default k;
