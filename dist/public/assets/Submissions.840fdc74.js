import{d as s,m as a,o as t,c as i,a as l,F as n,r as e,t as o,f as d,e as r}from"./vendor.f9d63584.js";var u=s({data:()=>({submissions:[],currentRound:null,oszFile:null,isSaving:!1}),computed:a({user:s=>s.loggedInUser}),async created(){await this.getData()},methods:{async getData(){const{data:s}=await this.$http.get("/api/submissions");this.submissions=s.submissions,this.currentRound=s.currentRound},async save(s){if(!this.oszFile)return void this.$store.dispatch("addToastMessage","Select an .osz");(null==s?void 0:s.target).disabled=!0,this.isSaving=!0;const a=new FormData;a.append("oszFile",this.oszFile);const{data:t}=await this.$http.post("/api/submissions",a,{headers:{"Content-Type":"multipart/form-data"}});t.success&&(await this.getData(),this.$store.dispatch("addToastMessage",{message:"Saved!",type:"success"})),this.isSaving=!1,(null==s?void 0:s.target).disabled=!1},uploadFile(s){var a,t;this.oszFile=null==(t=null==(a=s.target)?void 0:a.files)?void 0:t[0]}}});const c={class:"container"},b={class:"row mb-2"},m={class:"col-sm"},h={class:"card"},v={class:"card-body"},p={key:0,class:"table table-hover"},g=l("thead",null,[l("tr",null,[l("th",null,"Round"),l("th",null,"Submission Date"),l("th")])],-1),y={class:"row"},f={class:"col-sm"},F={class:"card"},w={class:"card-body"},S=r(" You have from "),k=r(" to "),z=r(" to submit your entry "),R=l("hr",null,null,-1),D=l("label",null," .osz File (20Mb max) ",-1),$={class:"row"},A={class:"col-sm"},C={key:0,class:"spinner-border spinner-border-sm align-middle",role:"status"},M=l("span",{class:"sr-only"},"Loading...",-1),T={key:1};u.render=function(s,a,r,u,x,j){return t(),i("div",c,[l("div",b,[l("div",m,[l("div",h,[l("div",v,[s.submissions?(t(),i("table",p,[g,l("tbody",null,[(t(!0),i(n,null,e(s.submissions,(s=>(t(),i("tr",{key:s.id},[l("td",null,o(s.round.id),1),l("td",null,o(s.updatedAt),1),l("td",null,[s.originalPath?(t(),i("a",{key:0,href:`/api/submissions/${s.id}/download`}," download ",8,["href"])):d("",!0)])])))),128))])])):d("",!0)])])])]),s.currentRound?(t(),i(n,{key:0},[l("div",y,[l("div",f,[l("div",F,[l("div",w,[l("p",null,[S,l("b",null,o(s.currentRound.submissionsStartedAt),1),k,l("b",null,o(s.currentRound.submissionsEndedAt),1),z]),R,D,l("input",{id:"oszFile",type:"file",class:"form-control",onChange:a[1]||(a[1]=a=>s.uploadFile(a))},null,32)])])])]),l("div",$,[l("div",A,[l("button",{class:"btn btn-primary btn-block",onClick:a[2]||(a[2]=a=>s.save(a))},[s.isSaving?(t(),i("div",C,[M])):(t(),i("span",T,"Save"))])])])],64)):d("",!0)])};export default u;
