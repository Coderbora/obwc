import{m as s}from"./index.e7e2ce56.js";import{d as a,o as t,c as i,a as e,F as l,e as n,t as o,h as d,g as r}from"./vendor.9fbad299.js";var u=a({data:()=>({submissions:[],currentRound:null,oszFile:null,isSaving:!1}),computed:s({user:s=>s.loggedInUser}),async created(){await this.getData()},methods:{async getData(){const{data:s}=await this.$http.get("/api/submissions");this.submissions=s.submissions,this.currentRound=s.currentRound},async save(s){if(!this.oszFile)return void this.$store.dispatch("addToastMessage","Select an .osz");(null==s?void 0:s.target).disabled=!0,this.isSaving=!0;const a=new FormData;a.append("oszFile",this.oszFile);const{data:t}=await this.$http.post("/api/submissions",a,{headers:{"Content-Type":"multipart/form-data"}});t.success&&(await this.getData(),this.$store.dispatch("addToastMessage",{message:"Saved!",type:"success"})),this.isSaving=!1,(null==s?void 0:s.target).disabled=!1},uploadFile(s){var a,t;this.oszFile=null==(t=null==(a=s.target)?void 0:a.files)?void 0:t[0]}}});const c={class:"container"},b={class:"row mb-2"},m={class:"col-sm"},h={class:"card"},v={class:"card-body"},p={key:0,class:"table table-hover"},g=e("thead",null,[e("tr",null,[e("th",null,"Round"),e("th",null,"Submission Date"),e("th")])],-1),y={class:"row"},f={class:"col-sm"},F={class:"card"},w={class:"card-body"},S=r(" You have from "),k=r(" to "),z=r(" to submit your entry "),R=e("hr",null,null,-1),D=e("label",null," .osz File (20Mb max) ",-1),$={class:"row"},x={class:"col-sm"},A={key:0,class:"spinner-border spinner-border-sm align-middle",role:"status"},C=e("span",{class:"sr-only"},"Loading...",-1),M={key:1};u.render=function(s,a,r,u,T,j){return t(),i("div",c,[e("div",b,[e("div",m,[e("div",h,[e("div",v,[s.submissions?(t(),i("table",p,[g,e("tbody",null,[(t(!0),i(l,null,n(s.submissions,(s=>(t(),i("tr",{key:s.id},[e("td",null,o(s.round.id),1),e("td",null,o(s.updatedAt),1),e("td",null,[s.originalPath?(t(),i("a",{key:0,href:`/api/submissions/${s.id}/download`}," download ",8,["href"])):d("",!0)])])))),128))])])):d("",!0)])])])]),s.currentRound?(t(),i(l,{key:0},[e("div",y,[e("div",f,[e("div",F,[e("div",w,[e("p",null,[S,e("b",null,o(s.currentRound.submissionsStartedAt),1),k,e("b",null,o(s.currentRound.submissionsEndedAt),1),z]),R,D,e("input",{id:"oszFile",type:"file",class:"form-control",onChange:a[1]||(a[1]=a=>s.uploadFile(a))},null,32)])])])]),e("div",$,[e("div",x,[e("button",{class:"btn btn-primary btn-block",onClick:a[2]||(a[2]=a=>s.save(a))},[s.isSaving?(t(),i("div",A,[C])):(t(),i("span",M,"Save"))])])])],64)):d("",!0)])};export default u;
